# FR.6 Backend

| ID | Описание | Предусловия | Ожидаемый результат | Статус | Комментарии |
|----|-----------|-------------|---------------------|---------|-------------|
| FR.6.1 | При старте приложения запускается фоновая загрузка dayN.zip | Чистая установка; устройство онлайн | В DevTools Network (для браузера) и в Charles Proxy (для нативного приложения) фиксируются запросы к CDN в формате:<br>https://s3.eponesh.com/games/files/21179/dayN.zip<br>Поочередно для всех уровней игры. | PASS/FAIL/SKIP | |
| FR.6.2 | QA-меню отображает актуальный прогресс | Идет процесс скачивания архивов | В QA меню:<br>1. Отображается номер текущего загружаемого дня<br>2. После скачивания всех ZIP статус "done" | PASS/FAIL/SKIP | |
| FR.6.3 | Загрузка ресурса, отсутствующего локально | 1. Нажать "Delete all images" в QA меню<br>2. Выбрать не загруженный уровень | В DevTools Network (для браузера) и в Charles Proxy (для нативного приложения) фиксируются запросы к CDN в формате:<br>https://s3.eponesh.com/games/files/21179/id.png где id - это идентификатор загружаемого персонажа из JSON структуры персонажей. | PASS/FAIL/SKIP | |
| FR.6.4 | Отображение баннера при потере сети до завершения загрузки | Идёт фоновая загрузка; выключить интернет | Через ≤ 1 с появляется overlay «No Internet Connection»; игра ставится на паузу | PASS/FAIL/SKIP | |
| FR.6.5 | Вернуться в приложение после сворачивания | Игра загружена, в игре отображается сообщение "No Internet Connection", игра на паузе.<br>Свернуть приложение.<br>Развернуть приложение. | Не исчезает сообщение "No Internet Connection", игра стоит на паузе.<br>Нет возможности взаимодействия с интерфейсом игры.<br>Нет возможности совершать действия в игре и меню. | PASS/FAIL/SKIP | |
| FR.6.6 | Отсутствие всплытия баннера, если загрузка уже завершена | Все ZIP скачаны; выключить интернет | Overlay не появляется; игра продолжает работу | PASS/FAIL/SKIP | |
| FR.6.7 | Скрытие баннера после восстановления сети | Интернет снова включён | Через ≤ 1 с overlay скрывается; игра продолжает работу | PASS/FAIL/SKIP | |
| FR.6.8 | Сохранение прогресса гостя в локальное и облако после уровня | Гость завершает уровень N | В DevTools Network (для браузера) и в Charles Proxy (для нативного приложения) фиксируются запросы к CDN в формате:<br>POST https://api.eponesh.com/gs/api/graphql/21179 | PASS/FAIL/SKIP | |
| FR.6.9 | Обновление облачного сохранения после завершённого уровня авторизованным игроком | Авторизованный в Яндекс.Игры игрок завершает уровень N | В DevTools Network (для браузера) и в Charles Proxy (для нативного приложения) фиксируются запросы к CDN в формате:<br>POST https://api.eponesh.com/gs/api/graphql/21179 | PASS/FAIL/SKIP | |
| FR.6.10 | Авторизация с другого устройства подтягивает облачный сейв | Авторизованный в Яндекс.Игры игрок сохранил прогресс в облако.<br>Авторизовался с другого устройства под своими учетными данными.<br>Запустил игру. | Прогресс прохождения игры загружен из облака | PASS/FAIL/SKIP | |
